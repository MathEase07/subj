<!DOCTYPE html>
<html lang="tl">
<head>
  <meta charset="UTF-8">
  <title>Sa Huling Jeep ng Gabi</title>
  <style>
    body {
      background-color: black;
      color: white;
      font-family: "Arial", sans-serif;
      text-align: center;
      padding: 30px;
    }
    #subtitle {
      font-size: 24px;
      margin-top: 40vh;
      line-height: 1.5;
      transition: opacity 0.5s;
    }
  </style>
</head>
<body>
  <div id="subtitle">Handa na? Pindutin ang Play sa app!</div>

  <script>
    // --- Subtitles with start time (in seconds) ---
    const subtitles = [
      { time: 0, text: "Sa lahat ng hindi inaasahan sa buhay, may mga gabi talagang hindi mo malilimutan." },
      { time: 12, text: "Ito ang kwento ni Bea... at ng isang jeep na tila huminto sa panahon." },
      { time: 25, text: "Gabi na sa Sariaya. Si Bea, galing sa kanyang part-time job, pagod ngunit nakangiti." },
      { time: 40, text: "Habang nag-aabang ng masasakyan, dumating ang huling jeep ng gabi." },
      { time: 55, text: "Tahimik ang loob, maliban sa mahinang tugtog ng radyo at pag-ugong ng makina." },
      { time: 70, text: "Umupo siya sa may gitna, katabi ang ilang pasaherong tila pamilyar." },
      { time: 85, text: "Habang umaandar ang jeep, napansin niyang pabalik-balik ang tanawin sa labas..." },
      { time: 100, text: "Ang parehong poste, parehong tindahan, parehong kalsada." },
      { time: 115, text: "“Kuya, saan po tayo dumadaan?” tanong ni Bea, may halong kaba." },
      { time: 125, text: "Ngunit walang sumasagot. Parang walang nakakarinig." },
      { time: 140, text: "Lumingon siya, at napansin... isa-isa nang naglalaho ang mga pasahero." },
      { time: 155, text: "Hanggang siya na lang ang natira. Bumigat ang hangin. Tumigil ang jeep." },
      { time: 170, text: "Lumapit ang drayber, at sa unang pagkakataon ay nagsalita." },
      { time: 180, text: "“Bea, oras na.”" },
      { time: 185, text: "Nanlamig siya. Paano nalaman ng drayber ang pangalan niya?" },
      { time: 195, text: "Bago siya makapagsalita, bumukas ang pinto ng jeep—liwanag ang bumungad." },
      { time: 210, text: "At sa liwanag na iyon, unti-unting nawala si Bea." },
      { time: 220, text: "Kinabukasan, may balita sa radyo." },
      { time: 225, text: "“Isang babaeng pasahero ang nasawi kagabi sa aksidente ng jeep sa may highway ng Sariaya.”" },
      { time: 240, text: "At sa jeep na iyon, may naiwan—isang bag na may pangalan: Bea Santos." },
      { time: 250, text: "Sa huling jeep ng gabi... minsan, hindi lahat ng pasahero ay tao." }
    ];

    let current = 0;
    let startTime = null;
    let playing = false;
    let timer;

    function showSubtitle() {
      const now = (Date.now() - startTime) / 1000;
      if (current < subtitles.length && now >= subtitles[current].time) {
        document.getElementById("subtitle").innerText = subtitles[current].text;
        current++;
      }
      if (playing) {
        timer = requestAnimationFrame(showSubtitle);
      }
    }

    function playSubtitles() {
      if (!playing) {
        playing = true;
        startTime = Date.now() - (current > 0 ? subtitles[current - 1].time * 1000 : 0);
        showSubtitle();
      }
    }

    function pauseSubtitles() {
      playing = false;
      cancelAnimationFrame(timer);
    }

    function stopSubtitles() {
      playing = false;
      cancelAnimationFrame(timer);
      current = 0;
      document.getElementById("subtitle").innerText = "Handa na? Pindutin ang Play sa app!";
    }

    // --- Connect with MIT App Inventor ---
    window.AppInventor = window.AppInventor || {};
    window.AppInventor.setWebViewString = function (command) {
      if (command === "play") playSubtitles();
      else if (command === "pause") pauseSubtitles();
      else if (command === "stop") stopSubtitles();
    };
  </script>
</body>
</html>
